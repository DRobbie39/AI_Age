@{
    ViewData["Title"] = "Thêm mới Công cụ AI";
}

<div class="container-fluid px-4">
    <h1 class="mt-4">Thêm mới Công cụ AI</h1>
    <ol class="breadcrumb mb-4">
        <li class="breadcrumb-item"><a href="#">Dashboard</a></li>
        <li class="breadcrumb-item"><a href="#">Công cụ AI</a></li>
        <li class="breadcrumb-item active">Thêm mới</li>
    </ol>

    <div class="card mb-4">
        <div class="card-header">
            <i class="fas fa-plus-circle me-2"></i>
            Thông tin Công cụ AI mới
        </div>
        <div class="card-body">
            <form action="#" method="post" class="tool-form" enctype="multipart/form-data">

                <div class="tool-form__group mb-4">
                    <label for="toolName" class="tool-form__label">Tên công cụ</label>
                    <input id="toolName" name="toolName" type="text" class="form-control tool-form__input" placeholder="Ví dụ: ChatGPT, Midjourney...">
                </div>

                <div class="tool-form__group mb-4">
                    <label for="categoryId" class="tool-form__label">Thể loại</label>
                    <div class="tool-form__select-wrapper">
                        <select id="categoryId" name="categoryId" class="form-select tool-form__input">
                            <option selected disabled>-- Chọn một thể loại --</option>
                            <option value="1">Tạo nội dung</option>
                            <option value="2">Tạo hình ảnh</option>
                            <option value="3">Viết mã</option>
                            <option value="4">Phân tích dữ liệu</option>
                        </select>
                    </div>
                </div>

                <div class="tool-form__group mb-4">
                    <label for="description" class="tool-form__label">Mô tả</label>
                    <textarea id="description" name="description" class="form-control tool-form__input" rows="4" placeholder="Mô tả chi tiết về công cụ và chức năng chính..."></textarea>
                </div>

                <div class="tool-form__group mb-4">
                    <label class="tool-form__label">Logo công cụ</label>
                    <div class="tool-form__upload">
                        <div id="image-preview-container" class="tool-form__preview d-none">
                            <img id="image-preview" src="#" alt="Xem trước logo" class="tool-form__preview-image" />
                            <button type="button" id="remove-image-btn" class="tool-form__remove-btn">×</button>
                        </div>
                        <label for="logoUpload" id="upload-label" class="tool-form__upload-label">
                            <span class="tool-form__upload-title">Logo công cụ</span>
                            <i class="fas fa-cloud-upload-alt tool-form__upload-icon"></i>
                            <p class="tool-form__upload-text">Kéo và thả file vào đây hoặc nhấn để chọn ảnh</p>
                        </label>
                        <input id="logoUpload" name="logoFile" type="file" accept="image/*" class="tool-form__upload-input">
                    </div>
                </div>

                <div class="tool-form__group mb-4">
                    <label for="websiteUrl" class="tool-form__label">URL Website</label>
                    <input id="websiteUrl" name="websiteUrl" type="text" class="form-control tool-form__input" placeholder="https://example.com">
                </div>

                <div class="tool-form__footer">
                    <a href="#" class="tool-form__button tool-form__button--secondary">Quay lại danh sách</a>
                    <button type="submit" class="tool-form__button tool-form__button--primary">
                        <i class="fas fa-save me-1"></i> Lưu lại
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const logoUpload = document.getElementById('logoUpload');
            const uploadLabel = document.getElementById('upload-label');
            const imagePreviewContainer = document.getElementById('image-preview-container');
            const imagePreview = document.getElementById('image-preview');
            const removeImageBtn = document.getElementById('remove-image-btn');

            logoUpload.addEventListener('change', function (e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        imagePreview.src = event.target.result;
                        imagePreviewContainer.classList.remove('d-none');
                        uploadLabel.classList.add('d-none');
                    }
                    reader.readAsDataURL(file);
                }
            });

            removeImageBtn.addEventListener('click', function () {
                logoUpload.value = '';
                imagePreview.src = '#';
                imagePreviewContainer.classList.add('d-none');
                uploadLabel.classList.remove('d-none');
            });
        });
    </script>
}
